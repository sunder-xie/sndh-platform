<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.nhry.data.basic.dao.TMdOperationLogMapper" >
  <resultMap id="BaseResultMap" type="com.nhry.data.basic.domain.TMdOperationLog" >
    <result column="LOG_NO" property="logNo" jdbcType="VARCHAR" />
    <result column="LOG_TYPE" property="logType" jdbcType="VARCHAR" />
    <result column="ORIGINAL_VALUE" property="originalValue" jdbcType="VARCHAR" />
    <result column="NEW_VALUE" property="newValue" jdbcType="VARCHAR" />
    <result column="LOG_MATNR" property="logMatnr" jdbcType="VARCHAR" />
    <result column="DISP_DATE" property="dispDate" jdbcType="DATE" />
    <result column="LOG_NAME" property="logName" jdbcType="VARCHAR" />
    <result column="LOG_DATE" property="logDate" jdbcType="DATE" />
    <result column="CREATE_AT" property="createAt" jdbcType="TIMESTAMP" />
    <result column="CREATE_BY" property="createBy" jdbcType="VARCHAR" />
    <result column="CREATE_BY_TXT" property="createByTxt" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    LOG_NO, LOG_TYPE, ORIGINAL_VALUE, NEW_VALUE, LOG_MATNR, DISP_DATE, LOG_NAME, LOG_DATE, CREATE_AT,
    CREATE_AT, CREATE_BY, CREATE_BY_TXT
  </sql>
  <insert id="save" parameterType="com.nhry.data.basic.domain.TMdOperationLog" >
    insert into t_md_operation_log
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="logNo != null" >
        LOG_NO,
      </if>
      <if test="logType != null" >
        LOG_TYPE,
      </if>
      <if test="originalValue != null" >
        ORIGINAL_VALUE,
      </if>
      <if test="newValue != null" >
        NEW_VALUE,
      </if>
      <if test="logMatnr != null" >
        LOG_MATNR,
      </if>
      <if test="dispDate != null" >
        DISP_DATE,
      </if>
      <if test="logName != null" >
        LOG_NAME,
      </if>
      <if test="logDate != null" >
        LOG_DATE,
      </if>
      <if test="createAt != null" >
        CREATE_AT,
      </if>
      <if test="createBy != null" >
        CREATE_BY,
      </if>
      <if test="createByTxt != null" >
        CREATE_BY_TXT,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="logNo != null" >
        #{logNo,jdbcType=VARCHAR},
      </if>
      <if test="logType != null" >
        #{logType,jdbcType=VARCHAR},
      </if>
      <if test="originalValue != null" >
        #{originalValue,jdbcType=VARCHAR},
      </if>
      <if test="newValue != null" >
        #{newValue,jdbcType=VARCHAR},
      </if>
      <if test="logMatnr != null" >
        #{logMatnr,jdbcType=VARCHAR},
      </if>
      <if test="dispDate != null" >
        #{dispDate,jdbcType=DATE},
      </if>
      <if test="logName != null" >
        #{logName,jdbcType=VARCHAR},
      </if>
      <if test="logDate != null" >
        #{logDate,jdbcType=DATE},
      </if>
      <if test="createAt != null" >
        #{createAt,jdbcType=TIMESTAMP},
      </if>
      <if test="createBy != null" >
        #{createBy,jdbcType=VARCHAR},
      </if>
      <if test="createByTxt != null" >
        #{createByTxt,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <select id="getCustOperationLog" resultType="hashmap" parameterType="com.nhry.model.basic.CustOperationQueryModel">
  SELECT
	l.LOG_NO,
	i.VIP_NAME,
	l.LOG_NAME,
	l.ORIGINAL_VALUE,
	l.NEW_VALUE,
	l.CREATE_AT,
	l.CREATE_BY_TXT
FROM
	t_md_operation_log l
LEFT JOIN t_vip_cust_info i ON l.LOG_NO = i.VIP_CUST_NO
WHERE
	l.LOG_TYPE = '10'
	<if test="">

    </if>

  </select>
</mapper>