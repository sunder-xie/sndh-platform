<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context" xmlns:jdbc="http://www.springframework.org/schema/jdbc"  
	xmlns:jee="http://www.springframework.org/schema/jee" xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:jaxws="http://cxf.apache.org/jaxws"
    xmlns:util="http://www.springframework.org/schema/util" xmlns:task="http://www.springframework.org/schema/task"  
    xsi:schemaLocation="
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd
		http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-4.0.xsd
		http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-4.0.xsd
		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd
		http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-4.0.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd
		http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd"
		default-lazy-init="true">
	<import resource="classpath:META-INF/cxf/cxf.xml"/>
    <import resource="classpath:META-INF/cxf/cxf-servlet.xml"/>
    <bean id="orderService" class="com.nhry.webservice.server.impl.OrderServiceImpl">
       <property name="dicService" ref="dicService"></property>
    </bean>
    <!-- webservice配置  -->
	<jaxws:server id="appService" endpointName="orderService" 
		serviceClass="com.nhry.webservice.server.dao.OrderService" address="/order">
		<jaxws:serviceBean> 
			<!-- 要暴露的 bean 的引用  -->
			<ref bean="orderService" />
		</jaxws:serviceBean>
	    <jaxws:inInterceptors>
    		<ref bean="wss4jInInterceptor"/>
    	</jaxws:inInterceptors>
	</jaxws:server>
<!-- 定义安全校验器 -->
	<bean id="wss4jInInterceptor" class="org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor">
       	<constructor-arg>
            <map>
               <entry key="action" value="UsernameToken"/>
               <entry key="passwordType" value="PasswordText"/>
               <!-- <entry key="signaturePropFile" value="..."/> -->
               <entry key="user" value="luoshengsha"/>
               <entry key="passwordCallbackClass" value="com.nhry.webservice.server.ServerPasswordCallback"/>
            </map>
       	</constructor-arg>
    </bean>
    
    	<!-- 定义安全校验器 -->
	<bean id="wss4jInInterceptor2" class="org.apache.cxf.ws.security.wss4j.WSS4JOutInterceptor">
		<constructor-arg>
			<map>
				<entry key="action" value="UsernameToken"/>
	            <entry key="passwordType" value="PasswordText"/>
	            <entry key="user" value="luoshengsha"/>
	            <entry key="password" value="Abcd1234!"/>
			</map>
		</constructor-arg>
	</bean>
	<!-- 邮件客户端webservice -->
    <jaxws:client id="orderClient" serviceClass="com.nhry.webservice.client.order.OrderService" address="http://127.0.0.1:8082/NhryService/ws/order/orderServicePort" >
    	<jaxws:outInterceptors>
    		<ref bean="wss4jInInterceptor2"/>
    	</jaxws:outInterceptors>
    </jaxws:client>
</beans>